<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Historia de Espa√±a (1808-1874)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .inicio {
            text-align: center;
        }
        
        .inicio button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
            display: block;
            width: 100%;
            max-width: 500px;
            margin: 15px auto;
        }
        
        .inicio button:hover {
            transform: scale(1.05);
        }
        
        .pregunta-container {
            display: none;
        }
        
        .pregunta {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
        }
        
        .pregunta h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .opciones {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .opcion {
            background: white;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }
        
        .opcion:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }
        
        .opciones.ocultas .opcion {
            background: #9e9e9e;
            color: #9e9e9e;
            user-select: none;
            border-color: #9e9e9e;
            cursor: default;
        }
        
        .opciones.ocultas .opcion:hover {
            transform: none;
            border-color: #9e9e9e;
        }
        
        .opcion.correcta {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .opcion.incorrecta {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .opcion.deshabilitada {
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .botones {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .btn-siguiente {
            background: #667eea;
            color: white;
        }
        
        .btn-siguiente:hover {
            background: #5568d3;
        }
        
        .btn-listo {
            background: #ff9800;
            color: white;
            display: block;
            margin: 20px auto;
        }
        
        .btn-listo:hover {
            background: #f57c00;
        }
        
        .btn-reiniciar {
            background: #764ba2;
            color: white;
        }
        
        .btn-reiniciar:hover {
            background: #633d8a;
        }
        
        .progreso {
            text-align: center;
            margin-bottom: 20px;
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .resultado {
            display: none;
            text-align: center;
        }
        
        .resultado h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
        }
        
        .puntuacion {
            font-size: 3em;
            color: #764ba2;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .mensaje {
            font-size: 1.2em;
            color: #555;
            margin: 20px 0;
        }
        
        .feedback {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
            border-left: 4px solid #2196f3;
        }
        
        .feedback.visible {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Quiz - Historia de Espa√±a</h1>
        
        <div class="inicio" id="inicio">
            <p style="font-size: 1.2em; margin-bottom: 30px; color: #555;">
                Elige qu√© tema quieres repasar:
            </p>
            <button onclick="seleccionarUnidad(1)">üèõÔ∏è Tema 1: As√≠ empez√≥ la Edad Contempor√°nea</button>
            <button onclick="seleccionarUnidad(2)">üìú Tema 2: La Constituci√≥n de 1812</button>
            <button onclick="seleccionarUnidad(3)">üëë Tema 3: Las Tres Etapas del Gobierno</button>
            <button onclick="seleccionarUnidad(4)">üë∏ Tema 4: Isabel II</button>
            <button onclick="seleccionarUnidad(5)">üè≠ Tema 5: La Revoluci√≥n Industrial</button>
            <button onclick="seleccionarUnidad(6)">üë• Tema 6: Una nueva sociedad</button>
            <button onclick="seleccionarUnidad(7)">üé® Tema 7: Nuevas formas de cultura</button>
            
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                <label style="display: flex; align-items: center; cursor: pointer; font-size: 1.1em;">
                    <input type="checkbox" id="ocultarRespuestas" checked style="width: 20px; height: 20px; margin-right: 10px; cursor: pointer;">
                    <span>Ocultar las respuestas para decirlas de memoria</span>
                </label>
            </div>
        </div>
        
        <div class="pregunta-container" id="juego">
            <div class="progreso" id="progreso"></div>
            <div class="pregunta" id="pregunta-actual"></div>
            <div class="feedback" id="feedback"></div>
            <div class="botones">
                <button class="btn btn-reiniciar" onclick="volverAlInicio()">üîÑ Volver al Men√∫</button>
                <button class="btn btn-siguiente" id="btn-siguiente" onclick="siguientePregunta()" style="display: none;">
                    Siguiente ‚û°Ô∏è
                </button>
            </div>
        </div>
        
        <div class="resultado" id="resultado">
            <h2>üéâ ¬°Quiz Completado!</h2>
            <div class="puntuacion" id="puntuacion-final"></div>
            <div class="mensaje" id="mensaje-final"></div>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
                <button class="btn btn-reiniciar" onclick="volverAlInicio()">üîÑ Volver al Men√∫</button>
                <button class="btn btn-siguiente" id="btn-repetir-falladas" onclick="repetirFalladas()" style="display: none;">
                    üéØ Repetir Preguntas Falladas
                </button>
            </div>
        </div>
    </div>

    <script>
        const preguntasUnidad1 = [
            {
                pregunta: "¬øEn qu√© siglo finaliz√≥ cuando comenz√≥ la Edad Contempor√°nea?",
                opciones: [
                    "Siglo XVII",
                    "A finales del siglo XVIII",
                    "Siglo XIX",
                    "Siglo XX"
                ],
                correcta: 1,
                explicacion: "La Edad Contempor√°nea comenz√≥ a finales del siglo XVIII."
            },
            {
                pregunta: "¬øQui√©n gobernaba Francia a finales del siglo XVIII?",
                opciones: [
                    "Napole√≥n Bonaparte",
                    "Luis XVI",
                    "Carlos IV",
                    "Fernando VII"
                ],
                correcta: 1,
                explicacion: "Luis XVI gobernaba Francia a finales del siglo XVIII."
            },
            {
                pregunta: "¬øQu√© tipo de rey era Luis XVI?",
                opciones: [
                    "Democr√°tico",
                    "Absolutista",
                    "Constitucional",
                    "Liberal"
                ],
                correcta: 1,
                explicacion: "Luis XVI era un rey absolutista."
            },
            {
                pregunta: "¬øPor qu√© estaba descontenta la poblaci√≥n francesa?",
                opciones: [
                    "Por la guerra",
                    "Porque pensaban que los reyes no pod√≠an gobernar a su antojo y que los seres humanos tenemos derechos",
                    "Por los impuestos",
                    "Por el hambre"
                ],
                correcta: 1,
                explicacion: "La poblaci√≥n estaba descontenta porque pensaba que los reyes no pod√≠an gobernar a su antojo, que los seres humanos tenemos derechos y que la ciudadan√≠a deb√≠a elegir a sus dirigentes."
            },
            {
                pregunta: "¬øEn qu√© a√±o se rebelaron los descontentos en Francia?",
                opciones: [
                    "1789",
                    "1799",
                    "1804",
                    "1807"
                ],
                correcta: 0,
                explicacion: "En 1789 los descontentos se rebelaron contra el rey."
            },
            {
                pregunta: "¬øQu√© le ocurri√≥ al rey Luis XVI?",
                opciones: [
                    "Huy√≥ del pa√≠s",
                    "Fue derrotado, llevado a prisi√≥n y ajusticiado",
                    "Abdic√≥ voluntariamente",
                    "Continu√≥ gobernando"
                ],
                correcta: 1,
                explicacion: "El rey fue derrotado, llevado a prisi√≥n y ajusticiado."
            },
            {
                pregunta: "¬øC√≥mo se llama el acontecimiento que se considera el inicio de la Edad Contempor√°nea?",
                opciones: [
                    "La Guerra de la Independencia",
                    "La Revoluci√≥n francesa",
                    "El Imperio de Napole√≥n",
                    "La Constituci√≥n de 1812"
                ],
                correcta: 1,
                explicacion: "La Revoluci√≥n francesa se considera el inicio de la Edad Contempor√°nea."
            },
            {
                pregunta: "¬øQu√© cambi√≥ la Revoluci√≥n francesa?",
                opciones: [
                    "Solo el rey",
                    "La forma de gobierno",
                    "Solo las fronteras",
                    "La religi√≥n"
                ],
                correcta: 1,
                explicacion: "La revoluci√≥n cambi√≥ la forma de gobierno."
            },
            {
                pregunta: "¬øQu√© sistema pol√≠tico crearon despu√©s de la Revoluci√≥n francesa?",
                opciones: [
                    "Absolutista",
                    "Liberal",
                    "Feudal",
                    "Comunista"
                ],
                correcta: 1,
                explicacion: "Crearon un sistema pol√≠tico liberal."
            },
            {
                pregunta: "¬øQu√© sistema abolieron durante la Revoluci√≥n francesa?",
                opciones: [
                    "El sistema republicano",
                    "El sistema feudal",
                    "El sistema democr√°tico",
                    "El sistema parlamentario"
                ],
                correcta: 1,
                explicacion: "Abolieron el sistema feudal."
            },
            {
                pregunta: "¬øQu√© se declar√≥ al abolir el sistema feudal?",
                opciones: [
                    "La guerra",
                    "La igualdad de las personas y que nadie deb√≠a ser siervo de otros",
                    "La rep√∫blica",
                    "El fin de la monarqu√≠a"
                ],
                correcta: 1,
                explicacion: "Se declar√≥ la igualdad de las personas y que nadie deb√≠a ser siervo de otros."
            },
            {
                pregunta: "¬øQu√© redactaron para los ciudadanos durante la Revoluci√≥n francesa?",
                opciones: [
                    "Un c√≥digo civil",
                    "Una declaraci√≥n de derechos",
                    "Un tratado de paz",
                    "Una ley de impuestos"
                ],
                correcta: 1,
                explicacion: "Redactaron una declaraci√≥n de derechos para los ciudadanos."
            },
            {
                pregunta: "¬øQu√© elaboraron para establecer d√≥nde estaba el poder?",
                opciones: [
                    "Un decreto",
                    "Una constituci√≥n",
                    "Una ley",
                    "Un edicto"
                ],
                correcta: 1,
                explicacion: "Elaboraron una constituci√≥n."
            },
            {
                pregunta: "Seg√∫n la constituci√≥n de la Revoluci√≥n francesa, ¬øen manos de qui√©n estaba el poder?",
                opciones: [
                    "Del rey",
                    "De los ciudadanos",
                    "De la nobleza",
                    "De la iglesia"
                ],
                correcta: 1,
                explicacion: "El poder estaba en manos de los ciudadanos."
            },
            {
                pregunta: "¬øC√≥mo ejerc√≠an el poder los ciudadanos?",
                opciones: [
                    "Directamente",
                    "Lo delegaban en gobernantes elegidos por ellos",
                    "A trav√©s del rey",
                    "No lo ejerc√≠an"
                ],
                correcta: 1,
                explicacion: "Los ciudadanos delegaban el poder en gobernantes elegidos por ellos."
            },
            {
                pregunta: "¬øQu√© derecho se estableci√≥ en la constituci√≥n francesa?",
                opciones: [
                    "Derecho a la propiedad",
                    "Derecho al sufragio",
                    "Derecho a trabajar",
                    "Derecho a viajar"
                ],
                correcta: 1,
                explicacion: "Se estableci√≥ el derecho al sufragio."
            },
            {
                pregunta: "¬øEra una democracia plena el sistema despu√©s de la Revoluci√≥n francesa?",
                opciones: [
                    "S√≠",
                    "No, porque las mujeres y las personas m√°s pobres no ten√≠an derecho a participar en las elecciones",
                    "S√≠, todos pod√≠an votar",
                    "Solo votaban los nobles"
                ],
                correcta: 1,
                explicacion: "No era una democracia plena porque las mujeres y las personas m√°s pobres no ten√≠an derecho a participar en las elecciones."
            },
            {
                pregunta: "¬øQui√©n dio un golpe de Estado en Francia en 1799?",
                opciones: [
                    "Luis XVI",
                    "Napole√≥n Bonaparte",
                    "Carlos IV",
                    "Fernando VII"
                ],
                correcta: 1,
                explicacion: "Napole√≥n Bonaparte dio un golpe de Estado en 1799."
            },
            {
                pregunta: "¬øQu√© t√≠tulo recibi√≥ Napole√≥n en 1804?",
                opciones: [
                    "Rey",
                    "Emperador",
                    "Presidente",
                    "C√≥nsul"
                ],
                correcta: 1,
                explicacion: "En 1804 Napole√≥n recibi√≥ el t√≠tulo de emperador."
            },
            {
                pregunta: "¬øQu√© pol√≠tica llev√≥ a cabo Napole√≥n?",
                opciones: [
                    "De aislamiento",
                    "De expansi√≥n en Europa",
                    "De paz",
                    "De comercio"
                ],
                correcta: 1,
                explicacion: "Napole√≥n llev√≥ a cabo una pol√≠tica de expansi√≥n en Europa."
            },
            {
                pregunta: "¬øPor d√≥nde extendi√≥ Napole√≥n su poder?",
                opciones: [
                    "Solo por Francia",
                    "Por casi todo el continente europeo",
                    "Por Asia",
                    "Por Am√©rica"
                ],
                correcta: 1,
                explicacion: "Napole√≥n extendi√≥ su poder por casi todo el continente europeo."
            },
            {
                pregunta: "¬øEn qu√© a√±o decidi√≥ Napole√≥n invadir Portugal?",
                opciones: [
                    "1799",
                    "1807",
                    "1808",
                    "1814"
                ],
                correcta: 1,
                explicacion: "En 1807 Napole√≥n decidi√≥ invadir Portugal."
            },
            {
                pregunta: "¬øQu√© ten√≠a que hacer Napole√≥n para invadir Portugal?",
                opciones: [
                    "Atacar por mar",
                    "Atravesar Espa√±a",
                    "Rodear por el norte",
                    "Esperar"
                ],
                correcta: 1,
                explicacion: "Napole√≥n ten√≠a que atravesar Espa√±a para invadir Portugal."
            },
            {
                pregunta: "¬øQui√©n era el rey de Espa√±a que permiti√≥ a Napole√≥n atravesar Espa√±a?",
                opciones: [
                    "Fernando VII",
                    "Carlos IV",
                    "Felipe V",
                    "Jos√© I"
                ],
                correcta: 1,
                explicacion: "Carlos IV era el rey de Espa√±a que se lo permiti√≥."
            },
            {
                pregunta: "¬øQu√© hizo Napole√≥n al atravesar Espa√±a?",
                opciones: [
                    "Solo pas√≥ de largo",
                    "Aprovech√≥ para ocupar localidades espa√±olas",
                    "Ayud√≥ a Espa√±a",
                    "Se retir√≥"
                ],
                correcta: 1,
                explicacion: "Napole√≥n aprovech√≥ para ocupar varias localidades espa√±olas."
            },
            {
                pregunta: "¬øA qui√©n depuso Napole√≥n del trono espa√±ol?",
                opciones: [
                    "A Fernando VII",
                    "A Carlos IV",
                    "A Jos√© I",
                    "A Luis XVI"
                ],
                correcta: 1,
                explicacion: "Napole√≥n depuso a Carlos IV del trono espa√±ol."
            },
            {
                pregunta: "¬øPor qui√©n sustituy√≥ Napole√≥n a Carlos IV?",
                opciones: [
                    "Por Jos√© I",
                    "Por su hijo Fernando VII",
                    "Por √©l mismo",
                    "Por Luis XVI"
                ],
                correcta: 1,
                explicacion: "Napole√≥n sustituy√≥ a Carlos IV por su hijo Fernando VII."
            },
            {
                pregunta: "¬øQu√© hizo Napole√≥n con Fernando VII?",
                opciones: [
                    "Lo coron√≥ rey",
                    "Lo llev√≥ prisionero a Francia",
                    "Lo ejecut√≥",
                    "Lo dej√≥ gobernar"
                ],
                correcta: 1,
                explicacion: "Napole√≥n llev√≥ prisionero a Francia a Fernando VII."
            },
            {
                pregunta: "¬øA qui√©n nombr√≥ Napole√≥n rey de Espa√±a?",
                opciones: [
                    "A Fernando VII",
                    "A su hermano Jos√© I",
                    "A Carlos IV",
                    "A s√≠ mismo"
                ],
                correcta: 1,
                explicacion: "Napole√≥n nombr√≥ rey de Espa√±a a su hermano Jos√© I."
            },
            {
                pregunta: "¬øAcept√≥ el pueblo espa√±ol al nuevo rey Jos√© I?",
                opciones: [
                    "S√≠",
                    "No",
                    "Al principio s√≠",
                    "Solo algunos"
                ],
                correcta: 1,
                explicacion: "El pueblo no acept√≥ al nuevo rey."
            },
            {
                pregunta: "¬øQu√© ocurri√≥ el 2 de mayo de 1808?",
                opciones: [
                    "Se firm√≥ la paz",
                    "El pueblo se sublev√≥ en Madrid",
                    "Napole√≥n fue derrotado",
                    "Fernando VII volvi√≥"
                ],
                correcta: 1,
                explicacion: "El 2 de mayo de 1808 el pueblo se sublev√≥ en Madrid."
            },
            {
                pregunta: "¬øQu√© comenz√≥ despu√©s de la sublevaci√≥n del 2 de mayo de 1808?",
                opciones: [
                    "La paz",
                    "La guerra de la Independencia",
                    "La Revoluci√≥n francesa",
                    "El imperio de Napole√≥n"
                ],
                correcta: 1,
                explicacion: "As√≠ comenz√≥ la guerra de la Independencia."
            },
            {
                pregunta: "¬øEn qu√© a√±o termin√≥ la guerra de la Independencia?",
                opciones: [
                    "1808",
                    "1814",
                    "1815",
                    "1812"
                ],
                correcta: 1,
                explicacion: "La guerra de la Independencia termin√≥ en 1814."
            },
            {
                pregunta: "¬øC√≥mo termin√≥ la guerra de la Independencia?",
                opciones: [
                    "Con la victoria de Napole√≥n",
                    "Con la derrota de Francia",
                    "Con un tratado de paz",
                    "Sin ganador"
                ],
                correcta: 1,
                explicacion: "La guerra termin√≥ con la derrota de Francia."
            },
            {
                pregunta: "¬øLogr√≥ Napole√≥n vencer al Reino Unido?",
                opciones: [
                    "S√≠",
                    "No",
                    "Solo parcialmente",
                    "Nunca luch√≥ contra ellos"
                ],
                correcta: 1,
                explicacion: "Napole√≥n tampoco logr√≥ vencer al Reino Unido."
            },
            {
                pregunta: "¬øD√≥nde cosech√≥ Napole√≥n una enorme derrota?",
                opciones: [
                    "En Espa√±a",
                    "En Rusia",
                    "En Portugal",
                    "En Inglaterra"
                ],
                correcta: 1,
                explicacion: "Napole√≥n cosech√≥ una enorme derrota en Rusia."
            },
            {
                pregunta: "¬øEn qu√© a√±o fue derrotado definitivamente Napole√≥n?",
                opciones: [
                    "1807",
                    "1815",
                    "1814",
                    "1812"
                ],
                correcta: 1,
                explicacion: "Napole√≥n fue derrotado en 1815."
            },
            {
                pregunta: "¬øQu√© le ocurri√≥ a Napole√≥n despu√©s de ser derrotado?",
                opciones: [
                    "Volvi√≥ a Francia",
                    "Fue desterrado a la isla de Santa Elena",
                    "Fue ejecutado",
                    "Huy√≥ a Am√©rica"
                ],
                correcta: 1,
                explicacion: "Napole√≥n fue desterrado a la isla de Santa Elena."
            },
            {
                pregunta: "¬øD√≥nde muri√≥ Napole√≥n?",
                opciones: [
                    "En Francia",
                    "En la isla de Santa Elena",
                    "En Rusia",
                    "En Espa√±a"
                ],
                correcta: 1,
                explicacion: "Napole√≥n muri√≥ en la isla de Santa Elena pocos a√±os despu√©s."
            }
        ];

        const preguntasUnidad2 = [
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ la Guerra de la Independencia?",
                opciones: [
                    "1806",
                    "1808",
                    "1810",
                    "1812"
                ],
                correcta: 1,
                explicacion: "La Guerra de la Independencia comenz√≥ en 1808."
            },
            {
                pregunta: "¬øQu√© pa√≠s realiz√≥ la ocupaci√≥n militar que llev√≥ a los patriotas a actuar?",
                opciones: [
                    "Inglaterra",
                    "Francia",
                    "Portugal",
                    "Austria"
                ],
                correcta: 1,
                explicacion: "Fue la ocupaci√≥n militar francesa la que llev√≥ a los patriotas a actuar."
            },
            {
                pregunta: "¬øQui√©nes se organizaron contra la ocupaci√≥n militar francesa?",
                opciones: [
                    "Los nobles",
                    "Los patriotas",
                    "El ej√©rcito real",
                    "Los comerciantes"
                ],
                correcta: 1,
                explicacion: "Los patriotas se organizaron contra la ocupaci√≥n militar francesa."
            },
            {
                pregunta: "¬øEn qu√© a√±o eligieron los patriotas a sus representantes?",
                opciones: [
                    "1808",
                    "1810",
                    "1812",
                    "1814"
                ],
                correcta: 1,
                explicacion: "En 1810 los patriotas eligieron a sus representantes."
            },
            {
                pregunta: "¬øQu√© se abri√≥ en 1810?",
                opciones: [
                    "El parlamento de Madrid",
                    "Las Cortes de C√°diz",
                    "El congreso de Sevilla",
                    "La asamblea de Valencia"
                ],
                correcta: 1,
                explicacion: "En 1810 se abrieron las Cortes de C√°diz."
            },
            {
                pregunta: "¬øQu√© hicieron en las Cortes de C√°diz?",
                opciones: [
                    "Declararon la guerra",
                    "Redactaron la Constituci√≥n",
                    "Nombraron un nuevo rey",
                    "Firmaron la paz"
                ],
                correcta: 1,
                explicacion: "En las Cortes de C√°diz redactaron la Constituci√≥n."
            },
            {
                pregunta: "¬øEn qu√© a√±o se aprob√≥ la Constituci√≥n de C√°diz?",
                opciones: [
                    "1808",
                    "1812",
                    "1814",
                    "1820"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n de C√°diz se aprob√≥ en 1812."
            },
            {
                pregunta: "¬øCu√°l era uno de los derechos establecidos en la Constituci√≥n de 1812?",
                opciones: [
                    "Monarqu√≠a absoluta",
                    "Divisi√≥n de poderes",
                    "Poder total del rey",
                    "Gobierno militar"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n estableci√≥ la divisi√≥n de poderes."
            },
            {
                pregunta: "¬øA qui√©n pertenec√≠a la soberan√≠a seg√∫n la Constituci√≥n de 1812?",
                opciones: [
                    "Al rey",
                    "Al pueblo",
                    "A la nobleza",
                    "A la iglesia"
                ],
                correcta: 1,
                explicacion: "Seg√∫n la Constituci√≥n, la soberan√≠a pertenec√≠a al pueblo."
            },
            {
                pregunta: "¬øQui√©nes ten√≠an derecho de sufragio seg√∫n la Constituci√≥n de 1812?",
                opciones: [
                    "Todos los ciudadanos",
                    "Solo varones mayores de 25 a√±os",
                    "Todas las personas mayores de edad",
                    "Solo los propietarios"
                ],
                correcta: 1,
                explicacion: "El derecho de sufragio era solo para varones mayores de 25 a√±os."
            },
            {
                pregunta: "¬øQu√© edad m√≠nima se requer√≠a para tener derecho de sufragio?",
                opciones: [
                    "18 a√±os",
                    "25 a√±os",
                    "21 a√±os",
                    "30 a√±os"
                ],
                correcta: 1,
                explicacion: "Se requer√≠a ser mayor de 25 a√±os para tener derecho de sufragio."
            },
            {
                pregunta: "¬øQu√© principio de igualdad estableci√≥ la Constituci√≥n?",
                opciones: [
                    "Igualdad de riquezas",
                    "Igualdad ante la ley",
                    "Igualdad de educaci√≥n",
                    "Igualdad de tierras"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n estableci√≥ la igualdad ante la ley."
            },
            {
                pregunta: "¬øQu√© libertad reconoci√≥ la Constituci√≥n de 1812?",
                opciones: [
                    "Libertad de comercio",
                    "Libertad de opini√≥n",
                    "Libertad de religi√≥n",
                    "Libertad de viajar"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n reconoci√≥ la libertad de opini√≥n."
            },
            {
                pregunta: "¬øCu√°ntos derechos principales estableci√≥ la Constituci√≥n de 1812?",
                opciones: [
                    "Dos",
                    "Cuatro",
                    "Tres",
                    "Cinco"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n estableci√≥ cuatro derechos principales: divisi√≥n de poderes, soberan√≠a del pueblo, igualdad ante la ley y libertad de opini√≥n."
            },
            {
                pregunta: "¬øLas mujeres ten√≠an derecho de sufragio en la Constituci√≥n de 1812?",
                opciones: [
                    "S√≠",
                    "No",
                    "Solo las mayores de 30 a√±os",
                    "Solo las casadas"
                ],
                correcta: 1,
                explicacion: "No, el derecho de sufragio era solo para varones mayores de 25 a√±os."
            }
        ];

        const preguntasUnidad2 = [
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ la Guerra de la Independencia?",
                opciones: [
                    "1806",
                    "1808",
                    "1810",
                    "1812"
                ],
                correcta: 1,
                explicacion: "La Guerra de la Independencia comenz√≥ en 1808."
            },
            {
                pregunta: "¬øEn qu√© a√±o se deroga (elimina) la Constituci√≥n de 1812 por primera vez?",
                opciones: [
                    "1812",
                    "1814",
                    "1820",
                    "1823"
                ],
                correcta: 1,
                explicacion: "En 1814 se deroga la Constituci√≥n de 1812."
            },
            {
                pregunta: "¬øQu√© significa 'derogar' la Constituci√≥n?",
                opciones: [
                    "Modificarla",
                    "Eliminarla",
                    "Mejorarla",
                    "Publicarla"
                ],
                correcta: 1,
                explicacion: "Derogar significa eliminar la Constituci√≥n."
            },
            {
                pregunta: "¬øQu√© tipo de gobierno se restaur√≥ en 1814?",
                opciones: [
                    "Democracia",
                    "Absolutismo",
                    "Rep√∫blica",
                    "Monarqu√≠a constitucional"
                ],
                correcta: 1,
                explicacion: "En 1814 se restaur√≥ el absolutismo."
            },
            {
                pregunta: "¬øC√≥mo se llama la primera etapa (1814-1820)?",
                opciones: [
                    "Trienio Liberal",
                    "Sexenio Absolutista",
                    "D√©cada Ominosa",
                    "Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "La primera etapa se llama Sexenio Absolutista (1814-1820)."
            },
            {
                pregunta: "¬øCu√°ntos a√±os dur√≥ el Sexenio Absolutista?",
                opciones: [
                    "Tres a√±os",
                    "Seis a√±os",
                    "Diez a√±os",
                    "Doce a√±os"
                ],
                correcta: 1,
                explicacion: "El Sexenio Absolutista dur√≥ 6 a√±os (1814-1820)."
            },
            {
                pregunta: "¬øEn qu√© a√±o se aprob√≥ de nuevo la Constituci√≥n?",
                opciones: [
                    "1814",
                    "1820",
                    "1823",
                    "1827"
                ],
                correcta: 1,
                explicacion: "En 1820 se aprob√≥ de nuevo la Constituci√≥n."
            },
            {
                pregunta: "¬øC√≥mo se llama la segunda etapa (1820-1823)?",
                opciones: [
                    "Sexenio Absolutista",
                    "Trienio Liberal",
                    "D√©cada Ominosa",
                    "Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "La segunda etapa se llama Trienio Liberal (1820-1823)."
            },
            {
                pregunta: "¬øCu√°ntos a√±os dur√≥ el Trienio Liberal?",
                opciones: [
                    "Dos a√±os",
                    "Tres a√±os",
                    "Seis a√±os",
                    "Diez a√±os"
                ],
                correcta: 1,
                explicacion: "El Trienio Liberal dur√≥ 3 a√±os (1820-1823)."
            },
            {
                pregunta: "¬øQu√© hizo Fernando VII en 1820 al inicio del Trienio Liberal?",
                opciones: [
                    "Abdic√≥",
                    "Jur√≥ la Constituci√≥n",
                    "Huy√≥ del pa√≠s",
                    "Declar√≥ la guerra"
                ],
                correcta: 1,
                explicacion: "Fernando VII jur√≥ la Constituci√≥n en 1820."
            },
            {
                pregunta: "¬øQu√© tipo de gobierno hab√≠a durante el Trienio Liberal?",
                opciones: [
                    "Absolutista",
                    "Liberal (gobierno no absolutista)",
                    "Dictadura",
                    "Anarqu√≠a"
                ],
                correcta: 1,
                explicacion: "Durante el Trienio Liberal el gobierno se liber√≥ y ya no era absolutista."
            },
            {
                pregunta: "¬øEn qu√© a√±o vuelve el absolutismo despu√©s del Trienio Liberal?",
                opciones: [
                    "1820",
                    "1823",
                    "1827",
                    "1833"
                ],
                correcta: 1,
                explicacion: "En 1823 vuelve el absolutismo."
            },
            {
                pregunta: "¬øC√≥mo se llama la tercera etapa que comienza en 1823?",
                opciones: [
                    "Trienio Liberal",
                    "D√©cada Ominosa",
                    "Sexenio Absolutista",
                    "Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "La tercera etapa se llama D√©cada Ominosa."
            },
            {
                pregunta: "¬øHasta qu√© a√±o dur√≥ la D√©cada Ominosa?",
                opciones: [
                    "1827",
                    "1833",
                    "1840",
                    "1843"
                ],
                correcta: 1,
                explicacion: "La D√©cada Ominosa dur√≥ hasta 1833."
            },
            {
                pregunta: "¬øCu√°ntos a√±os aproximadamente dur√≥ la D√©cada Ominosa?",
                opciones: [
                    "Cinco a√±os",
                    "Diez a√±os",
                    "Quince a√±os",
                    "Veinte a√±os"
                ],
                correcta: 1,
                explicacion: "La D√©cada Ominosa dur√≥ aproximadamente 10 a√±os (1823-1833)."
            },
            {
                pregunta: "¬øQu√© prohib√≠a la Ley S√°lica?",
                opciones: [
                    "Las elecciones",
                    "Que las mujeres gobernaran",
                    "La libertad de expresi√≥n",
                    "El comercio"
                ],
                correcta: 1,
                explicacion: "La Ley S√°lica prohib√≠a a las mujeres gobernar."
            },
            {
                pregunta: "¬øQu√© public√≥ Fernando VII para derogar la Ley S√°lica?",
                opciones: [
                    "Un decreto real",
                    "La Pragm√°tica Sanci√≥n",
                    "Una nueva constituci√≥n",
                    "Un edicto"
                ],
                correcta: 1,
                explicacion: "Fernando VII public√≥ la Pragm√°tica Sanci√≥n."
            },
            {
                pregunta: "¬øQu√© derog√≥ la Pragm√°tica Sanci√≥n?",
                opciones: [
                    "La Constituci√≥n",
                    "El Auto Acordado de Felipe V (Ley S√°lica)",
                    "El Trienio Liberal",
                    "El absolutismo"
                ],
                correcta: 1,
                explicacion: "La Pragm√°tica Sanci√≥n derog√≥ el Auto Acordado de Felipe V (que era la Ley S√°lica)."
            },
            {
                pregunta: "¬øQu√© restaur√≥ la Pragm√°tica Sanci√≥n?",
                opciones: [
                    "El absolutismo",
                    "El orden sucesorio tradicional castellano",
                    "La rep√∫blica",
                    "La monarqu√≠a francesa"
                ],
                correcta: 1,
                explicacion: "La Pragm√°tica Sanci√≥n restaur√≥ el orden sucesorio tradicional castellano."
            },
            {
                pregunta: "¬øPor qu√© Fernando VII public√≥ la Pragm√°tica Sanci√≥n?",
                opciones: [
                    "Para reformar el ej√©rcito",
                    "Porque no ten√≠a hijos varones y quer√≠a que su hija Isabel pudiera heredar el trono",
                    "Para eliminar la Constituci√≥n",
                    "Para declarar la guerra"
                ],
                correcta: 1,
                explicacion: "Fernando VII no ten√≠a hijos varones y quer√≠a que su hija Isabel (futura Isabel II) pudiera heredar el trono."
            },
            {
                pregunta: "¬øQui√©n fue el rey que permiti√≥ que Isabel II pudiera gobernar?",
                opciones: [
                    "Carlos IV",
                    "Fernando VII",
                    "Alfonso XII",
                    "Felipe V"
                ],
                correcta: 1,
                explicacion: "Fernando VII fue quien public√≥ la Pragm√°tica Sanci√≥n para que Isabel pudiera gobernar."
            },
            {
                pregunta: "Gracias a la Pragm√°tica Sanci√≥n, ¬øqu√© pudo hacer Isabel?",
                opciones: [
                    "Estudiar en el extranjero",
                    "Gobernar",
                    "Casarse libremente",
                    "Viajar"
                ],
                correcta: 1,
                explicacion: "Gracias a la Pragm√°tica Sanci√≥n, Isabel pudo gobernar."
            },
            {
                pregunta: "¬øCu√°ntas etapas principales hubo entre 1814 y 1833?",
                opciones: [
                    "Dos",
                    "Tres",
                    "Cuatro",
                    "Cinco"
                ],
                correcta: 1,
                explicacion: "Hubo tres etapas: Sexenio Absolutista, Trienio Liberal y D√©cada Ominosa."
            },
            {
                pregunta: "¬øQu√© tipo de gobierno hab√≠a durante el Sexenio Absolutista?",
                opciones: [
                    "Liberal",
                    "Absolutista",
                    "Democr√°tico",
                    "Republicano"
                ],
                correcta: 1,
                explicacion: "Durante el Sexenio Absolutista hab√≠a un gobierno absolutista."
            },
            {
                pregunta: "¬øQu√© tipo de gobierno hab√≠a durante la D√©cada Ominosa?",
                opciones: [
                    "Liberal",
                    "Absolutista",
                    "Democr√°tico",
                    "Constitucional"
                ],
                correcta: 1,
                explicacion: "Durante la D√©cada Ominosa volvi√≥ el absolutismo."
            },
            {
                pregunta: "¬øEn cu√°l de estas etapas estuvo vigente la Constituci√≥n?",
                opciones: [
                    "Sexenio Absolutista",
                    "Trienio Liberal",
                    "D√©cada Ominosa",
                    "En ninguna"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n estuvo vigente durante el Trienio Liberal."
            },
            {
                pregunta: "¬øCu√°ntas veces se elimin√≥ la Constituci√≥n entre 1814 y 1833?",
                opciones: [
                    "Una vez",
                    "Dos veces",
                    "Tres veces",
                    "Nunca"
                ],
                correcta: 1,
                explicacion: "La Constituci√≥n se elimin√≥ dos veces: en 1814 y en 1823."
            }
        ];

        const preguntasUnidad3 = [
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ el periodo de Isabel II?",
                opciones: [
                    "1827",
                    "1833",
                    "1840",
                    "1843"
                ],
                correcta: 1,
                explicacion: "El periodo de Isabel II comenz√≥ en 1833."
            },
            {
                pregunta: "¬øC√≥mo se llama el primer periodo de Isabel II?",
                opciones: [
                    "Reinado personal",
                    "Periodo de Regencia",
                    "Sexenio revolucionario",
                    "Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "El primer periodo se llama Periodo de Regencia."
            },
            {
                pregunta: "¬øQui√©n fue la regente durante el Periodo de Regencia?",
                opciones: [
                    "Isabel II",
                    "Mar√≠a Cristina",
                    "La reina Isabel",
                    "Alfonso XII"
                ],
                correcta: 1,
                explicacion: "Mar√≠a Cristina fue la regente."
            },
            {
                pregunta: "¬øEn qu√© a√±os gobern√≥ Mar√≠a Cristina como regente?",
                opciones: [
                    "1827-1833",
                    "1833-1840",
                    "1840-1848",
                    "1843-1868"
                ],
                correcta: 1,
                explicacion: "Mar√≠a Cristina gobern√≥ como regente de 1833 a 1840."
            },
            {
                pregunta: "¬øCu√°ntos a√±os dur√≥ la regencia de Mar√≠a Cristina?",
                opciones: [
                    "5 a√±os",
                    "7 a√±os",
                    "10 a√±os",
                    "13 a√±os"
                ],
                correcta: 1,
                explicacion: "La regencia de Mar√≠a Cristina dur√≥ 7 a√±os (1833-1840)."
            },
            {
                pregunta: "¬øQu√© ocurri√≥ en 1848?",
                opciones: [
                    "Termin√≥ el reinado de Isabel II",
                    "Se construy√≥ el primer ferrocarril",
                    "Comenz√≥ la I Rep√∫blica",
                    "Se aprob√≥ la Constituci√≥n"
                ],
                correcta: 1,
                explicacion: "En 1848 se construy√≥ el primer ferrocarril."
            },
            {
                pregunta: "¬øEn qu√© a√±o se construy√≥ el primer ferrocarril en Espa√±a?",
                opciones: [
                    "1833",
                    "1848",
                    "1843",
                    "1868"
                ],
                correcta: 1,
                explicacion: "El primer ferrocarril se construy√≥ en 1848."
            },
            {
                pregunta: "¬øCu√°ndo se construy√≥ el primer ferrocarril durante el reinado de Isabel II?",
                opciones: [
                    "Durante la Regencia",
                    "Durante su reinado personal, en 1848",
                    "Durante el Sexenio Revolucionario",
                    "Durante la Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "El primer ferrocarril se construy√≥ en 1848, durante el reinado personal de Isabel II."
            },
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ Isabel II su reinado personal?",
                opciones: [
                    "1833",
                    "1843",
                    "1848",
                    "1868"
                ],
                correcta: 1,
                explicacion: "Isabel II comenz√≥ su reinado personal en 1843."
            },
            {
                pregunta: "¬øHasta qu√© a√±o dur√≥ el reinado personal de Isabel II?",
                opciones: [
                    "1848",
                    "1868",
                    "1872",
                    "1874"
                ],
                correcta: 1,
                explicacion: "El reinado personal de Isabel II dur√≥ hasta 1868."
            },
            {
                pregunta: "¬øCu√°ntos a√±os dur√≥ el reinado personal de Isabel II?",
                opciones: [
                    "15 a√±os",
                    "25 a√±os",
                    "30 a√±os",
                    "35 a√±os"
                ],
                correcta: 1,
                explicacion: "El reinado personal de Isabel II dur√≥ 25 a√±os (1843-1868)."
            },
            {
                pregunta: "¬øQu√© hubo durante el reinado de Isabel II (1843-1848)?",
                opciones: [
                    "Solo paz",
                    "Partidos propuestos/moderados",
                    "Guerra constante",
                    "Una rep√∫blica"
                ],
                correcta: 1,
                explicacion: "Durante su reinado hubo partidos propuestos/moderados."
            },
            {
                pregunta: "¬øQui√©n apoy√≥ a Isabel II durante el Periodo de Regencia?",
                opciones: [
                    "Los absolutistas",
                    "Los liberales",
                    "Los carlistas",
                    "Los republicanos"
                ],
                correcta: 1,
                explicacion: "Los liberales apoyaron a Isabel II durante el Periodo de Regencia."
            },
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ el gobierno provisional?",
                opciones: [
                    "1843",
                    "1868",
                    "1872",
                    "1874"
                ],
                correcta: 1,
                explicacion: "El gobierno provisional comenz√≥ en 1868."
            },
            {
                pregunta: "¬øQui√©n fue el militar que dirigi√≥ el gobierno provisional en 1868?",
                opciones: [
                    "Fernando VII",
                    "Serrano",
                    "Alfonso XII",
                    "Mar√≠a Cristina"
                ],
                correcta: 1,
                explicacion: "El militar Serrano dirigi√≥ el gobierno provisional en 1868."
            },
            {
                pregunta: "¬øQu√© tipo de gobierno hubo en 1868?",
                opciones: [
                    "Monarqu√≠a absoluta",
                    "Gobierno provisional con el militar Serrano",
                    "Rep√∫blica estable",
                    "Dictadura civil"
                ],
                correcta: 1,
                explicacion: "En 1868 hubo un gobierno provisional con el militar Serrano."
            },
            {
                pregunta: "¬øDurante qu√© periodo gobern√≥ Serrano?",
                opciones: [
                    "Durante el Trienio Liberal",
                    "Durante el Sexenio Revolucionario",
                    "Durante la Restauraci√≥n",
                    "Durante la Regencia"
                ],
                correcta: 1,
                explicacion: "Serrano gobern√≥ durante el Sexenio Revolucionario."
            },
            {
                pregunta: "¬øQu√© periodo comenz√≥ en 1868?",
                opciones: [
                    "El Trienio Liberal",
                    "El Sexenio Revolucionario",
                    "La I Rep√∫blica",
                    "La Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "En 1868 comenz√≥ el Sexenio Revolucionario."
            },
            {
                pregunta: "¬øHasta qu√© a√±o dur√≥ el Sexenio Revolucionario?",
                opciones: [
                    "1870",
                    "1874",
                    "1872",
                    "1876"
                ],
                correcta: 1,
                explicacion: "El Sexenio Revolucionario dur√≥ hasta 1874."
            },
            {
                pregunta: "¬øCu√°ntos a√±os dur√≥ aproximadamente el Sexenio Revolucionario?",
                opciones: [
                    "2 a√±os",
                    "6 a√±os",
                    "4 a√±os",
                    "8 a√±os"
                ],
                correcta: 1,
                explicacion: "El Sexenio Revolucionario dur√≥ 6 a√±os (1868-1874)."
            },
            {
                pregunta: "¬øQu√© ocurri√≥ durante el Sexenio Revolucionario?",
                opciones: [
                    "Solo hubo monarqu√≠a",
                    "Hubo la I Rep√∫blica",
                    "Volvi√≥ Isabel II",
                    "Continu√≥ el absolutismo"
                ],
                correcta: 1,
                explicacion: "Durante el Sexenio Revolucionario hubo la I Rep√∫blica."
            },
            {
                pregunta: "¬øEn qu√© a√±o comenz√≥ la I Rep√∫blica?",
                opciones: [
                    "1868",
                    "1873",
                    "1872",
                    "1874"
                ],
                correcta: 1,
                explicacion: "La I Rep√∫blica comenz√≥ en 1873."
            },
            {
                pregunta: "¬øHasta qu√© a√±o dur√≥ la I Rep√∫blica?",
                opciones: [
                    "1872",
                    "1874",
                    "1873",
                    "1875"
                ],
                correcta: 1,
                explicacion: "La I Rep√∫blica dur√≥ hasta 1874."
            },
            {
                pregunta: "¬øCu√°nto tiempo dur√≥ la I Rep√∫blica?",
                opciones: [
                    "1 a√±o",
                    "11 meses",
                    "2 a√±os",
                    "6 meses"
                ],
                correcta: 1,
                explicacion: "La I Rep√∫blica dur√≥ solo 11 meses (1873-1874)."
            },
            {
                pregunta: "¬øEn qu√© a√±o fue la Restauraci√≥n con Alfonso XII?",
                opciones: [
                    "1868",
                    "1874",
                    "1873",
                    "1876"
                ],
                correcta: 1,
                explicacion: "La Restauraci√≥n con Alfonso XII fue en 1874."
            },
            {
                pregunta: "¬øQui√©n subi√≥ al trono en la Restauraci√≥n de 1874?",
                opciones: [
                    "Isabel II",
                    "Alfonso XII",
                    "Fernando VII",
                    "Serrano"
                ],
                correcta: 1,
                explicacion: "Alfonso XII subi√≥ al trono en la Restauraci√≥n de 1874."
            },
            {
                pregunta: "¬øQu√© ocurri√≥ en 1874?",
                opciones: [
                    "Continu√≥ la Rep√∫blica",
                    "Restauraci√≥n con Alfonso XII",
                    "Volvi√≥ Isabel II",
                    "Gobierno de Serrano"
                ],
                correcta: 1,
                explicacion: "En 1874 hubo la Restauraci√≥n con Alfonso XII."
            },
            {
                pregunta: "¬øQu√© sistema pol√≠tico vino en 1874?",
                opciones: [
                    "Rep√∫blica",
                    "Restauraci√≥n mon√°rquica con Alfonso XII",
                    "Dictadura",
                    "Gobierno provisional"
                ],
                correcta: 1,
                explicacion: "En 1874 vino la Restauraci√≥n mon√°rquica con Alfonso XII."
            },
            {
                pregunta: "¬øQu√© periodo termin√≥ con la llegada del Sexenio Revolucionario en 1868?",
                opciones: [
                    "El Periodo de Regencia",
                    "El reinado personal de Isabel II",
                    "La I Rep√∫blica",
                    "La Restauraci√≥n"
                ],
                correcta: 1,
                explicacion: "El Sexenio Revolucionario en 1868 termin√≥ con el reinado personal de Isabel II."
            }
        ];

        let preguntas = [];
        let preguntaActual = 0;
        let puntuacion = 0;
        let preguntasAleatorias = [];
        let unidadSeleccionada = 0;
        let ocultarRespuestas = true;
        let preguntasFalladas = [];
        let respuestasUsuario = [];

        function seleccionarUnidad(unidad) {
            unidadSeleccionada = unidad;
            ocultarRespuestas = document.getElementById('ocultarRespuestas').checked;
            
            if (unidad === 1) {
                preguntas = [...preguntasUnidad1];
            } else if (unidad === 2) {
                preguntas = [...preguntasUnidad2];
            } else if (unidad === 3) {
                preguntas = [...preguntasUnidad3];
            } else if (unidad === 4) {
                preguntas = [...preguntasUnidad4];
            }
            iniciarJuego();
        }

        function iniciarJuego() {
            document.getElementById('inicio').style.display = 'none';
            document.getElementById('juego').style.display = 'block';
            document.getElementById('resultado').style.display = 'none';
            preguntaActual = 0;
            puntuacion = 0;
            preguntasFalladas = [];
            respuestasUsuario = [];
            
            preguntasAleatorias = [...preguntas];
            
            mostrarPregunta();
        }

        function mostrarPregunta() {
            if (preguntaActual >= preguntasAleatorias.length) {
                mostrarResultado();
                return;
            }

            const pregunta = preguntasAleatorias[preguntaActual];
            const container = document.getElementById('pregunta-actual');
            
            document.getElementById('progreso').textContent = 
                `Pregunta ${preguntaActual + 1} de ${preguntasAleatorias.length}`;
            
            let html = `<h2>${pregunta.pregunta}</h2>`;
            
            if (ocultarRespuestas) {
                html += `<button class="btn btn-listo" onclick="mostrarOpciones()">üëÅÔ∏è Mostrar Respuestas (Listo)</button>
                         <div class="opciones ocultas" id="opciones-container">`;
            } else {
                html += `<div class="opciones" id="opciones-container">`;
            }
            
            pregunta.opciones.forEach((opcion, index) => {
                html += `<div class="opcion" data-index="${index}">${opcion}</div>`;
            });
            
            html += '</div>';
            container.innerHTML = html;
            
            document.getElementById('btn-siguiente').style.display = 'none';
            document.getElementById('feedback').classList.remove('visible');
            
            // Si no est√° oculto, activar clicks directamente
            if (!ocultarRespuestas) {
                const opciones = document.querySelectorAll('.opcion');
                opciones.forEach(opcion => {
                    opcion.onclick = function() {
                        seleccionarOpcion(parseInt(this.getAttribute('data-index')));
                    };
                });
            }
        }

        function mostrarOpciones() {
            const opcionesContainer = document.getElementById('opciones-container');
            opcionesContainer.classList.remove('ocultas');
            
            const opciones = opcionesContainer.querySelectorAll('.opcion');
            opciones.forEach(opcion => {
                opcion.onclick = function() {
                    seleccionarOpcion(parseInt(this.getAttribute('data-index')));
                };
            });
            
            event.target.style.display = 'none';
        }

        function seleccionarOpcion(index) {
            const pregunta = preguntasAleatorias[preguntaActual];
            const opciones = document.querySelectorAll('.opcion');
            
            opciones.forEach(opcion => {
                opcion.classList.add('deshabilitada');
                opcion.onclick = null;
            });
            
            const esCorrecta = index === pregunta.correcta;
            respuestasUsuario.push({
                pregunta: pregunta,
                respuestaUsuario: index,
                correcta: esCorrecta
            });
            
            if (esCorrecta) {
                opciones[index].classList.add('correcta');
                puntuacion++;
                document.getElementById('feedback').innerHTML = 
                    `<strong>‚úÖ ¬°Correcto!</strong><br>${pregunta.explicacion}`;
            } else {
                opciones[index].classList.add('incorrecta');
                opciones[pregunta.correcta].classList.add('correcta');
                preguntasFalladas.push(pregunta);
                document.getElementById('feedback').innerHTML = 
                    `<strong>‚ùå Incorrecto.</strong><br>${pregunta.explicacion}`;
            }
            
            document.getElementById('feedback').classList.add('visible');
            document.getElementById('btn-siguiente').style.display = 'block';
        }

        function siguientePregunta() {
            preguntaActual++;
            mostrarPregunta();
        }

        function mostrarResultado() {
            document.getElementById('juego').style.display = 'none';
            document.getElementById('resultado').style.display = 'block';
            
            const porcentaje = Math.round((puntuacion / preguntasAleatorias.length) * 100);
            document.getElementById('puntuacion-final').textContent = 
                `${puntuacion} / ${preguntasAleatorias.length} (${porcentaje}%)`;
            
            let mensaje = '';
            if (porcentaje === 100) {
                mensaje = '¬°Perfecto! üåü ¬°Dominas completamente el tema!';
            } else if (porcentaje >= 80) {
                mensaje = '¬°Excelente! üéâ Tienes muy buenos conocimientos.';
            } else if (porcentaje >= 60) {
                mensaje = '¬°Bien! üëç Vas por buen camino, sigue repasando.';
            } else {
                mensaje = '¬°√Ånimo! üí™ Repasa el material y vuelve a intentarlo.';
            }
            
            document.getElementById('mensaje-final').textContent = mensaje;
            
            // Mostrar bot√≥n de repetir falladas si hay preguntas incorrectas
            const btnRepetir = document.getElementById('btn-repetir-falladas');
            if (preguntasFalladas.length > 0) {
                btnRepetir.style.display = 'block';
            } else {
                btnRepetir.style.display = 'none';
            }
        }

        function repetirFalladas() {
            preguntaActual = 0;
            puntuacion = 0;
            preguntasAleatorias = [...preguntasFalladas];
            preguntasFalladas = [];
            respuestasUsuario = [];
            
            document.getElementById('resultado').style.display = 'none';
            document.getElementById('juego').style.display = 'block';
            
            mostrarPregunta();
        }

        function volverAlInicio() {
            document.getElementById('resultado').style.display = 'none';
            document.getElementById('juego').style.display = 'none';
            document.getElementById('inicio').style.display = 'block';
        }
    </script>
</body>
</html>
